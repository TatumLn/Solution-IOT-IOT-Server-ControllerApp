<?xml version="1.0" encoding="utf-8" ?>
<viewModels:BaseContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                            xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                            xmlns:viewModels="clr-namespace:IOT_Controller.ViewsModels"
                            x:Class="IOT_Controller.DesignView.PopUp">

    <!-- Semi-transparent background -->
    <Border StrokeShape="RoundRectangle 40,40,0,0"
            BackgroundColor="#FFFFFF">
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="45"/>
                <RowDefinition Height="100"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="20"/>
                <RowDefinition Height="50"/>
            </Grid.RowDefinitions>

            <Label Style="{StaticResource IndicateurValue}"
                   Grid.Row="0"
                   Text="Appareils disponible"
                   FontSize="Small"
                   TextColor="#B0ADAD"/>

            <HorizontalStackLayout Grid.Row="1"
                                   HorizontalOptions="Center">
                <ScrollView Orientation="Horizontal">
                    <!-- Boutons -->
                    <CollectionView ItemsSource="{Binding ButtonList}">
                        <CollectionView.ItemsLayout>
                            <GridItemsLayout Orientation="Horizontal" 
                                             HorizontalItemSpacing="20"/>
                        </CollectionView.ItemsLayout>
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <ContentView VerticalOptions="Center">
                                    <VerticalStackLayout VerticalOptions="Center">
                                        <Border BackgroundColor="{Binding BorderBackgroundColor}"
                                                StrokeShape="RoundRectangle 40"
                                                Stroke="#0019CBC0"
                                                HeightRequest="70"
                                                WidthRequest="70">
                                            <ImageButton Source="{Binding ButtonImage}"
                                                         HeightRequest="45"
                                                         Command="{Binding ButtonCommand}" 
                                                         CommandParameter="{Binding ButtonIndex}"
                                                         VerticalOptions="Center"/>
                                        </Border>
                                        <StackLayout Orientation="Horizontal"
                                                     VerticalOptions="Center"
                                                     Spacing="5"
                                                     Margin="15,2,0,0">
                                        <Label Style="{StaticResource IndicateurValue}"
                                               Text="actif"
                                               TextColor="#B0ADAD"
                                               HorizontalOptions="Center"
                                               FontSize="12"
                                               Margin="0,5"/>
                                        <BoxView BackgroundColor="Transparent"
                                                 WidthRequest="8" 
                                                 HeightRequest="8" 
                                                 CornerRadius="5" 
                                                 Color="#5BED16"/>
                                        </StackLayout>
                                    </VerticalStackLayout>
                                </ContentView>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </ScrollView>
            </HorizontalStackLayout>

            <StackLayout Grid.Row="2">
                <Grid>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="90"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="90"/>
                    </Grid.ColumnDefinitions>

                    <StackLayout Grid.Column="0" 
                                 Padding="20">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <!-- -->
                            <Label Grid.Row="0"
                                   Style="{StaticResource IndicateurValue}"
                                   Text="Air"
                                   TextColor="#B0ADAD"
                                   FontSize="13"
                                   FontAttributes="Bold"
                                   Margin="0,14"/>
                            <Label Grid.Row="1"
                                   Style="{StaticResource IndicateurValue}"
                                   Text="."
                                   TextColor="#B0ADAD"
                                   FontSize="15"/>

                        </Grid>
                    </StackLayout>

                    <HorizontalStackLayout Grid.Column="1"
                                           Margin="0,28">

                        <!-- Diminuer button -->
                            <Button Style="{StaticResource BoutonStyleAugmenter/Diminuer}"
                                    Text="-"
                                    Command="{Binding Commands.Diminuer}"/>

                        <Border HeightRequest="{Binding Source={x:Reference Elle}, Path=HeightRequest}"
                                WidthRequest="{Binding Source={x:Reference Elle}, Path=WidthRequest}"
                                StrokeShape="RoundRectangle 55"
                                Stroke="#19CBC0"
                                StrokeThickness="4">

                           <Grid Margin="5">
                            <!-- Background circle -->
                            <Ellipse Fill="#3319CBC0"
                                     HeightRequest="100"
                                     WidthRequest="100"/>

                                                <!-- Temperature label -->
                            <Label Style="{StaticResource IndicateurValue}"
                                   Text="{Binding SelectedContent}"
                                   TextColor="#B0ADAD"
                                   FontSize="40"
                                   HorizontalOptions="Center"
                                   VerticalOptions="Center" />
                           </Grid>

                        </Border>

                        <!-- Augmenter button -->
                            <Button Style="{StaticResource BoutonStyleAugmenter/Diminuer}"
                                    Text="+"
                                    Command="{Binding Commands.Augmenter}"/>

                    </HorizontalStackLayout>

                    <StackLayout Grid.Column="2"
                                 Padding="20">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Switch Style="{StaticResource SwitchStyle}" 
                                    Grid.Row="0"/>
                            <Label Style="{StaticResource IndicateurValue}"
                                   Grid.Row="1"
                                   Text="Activer"
                                   TextColor="#B0ADAD"
                                   FontSize="12"/>

                        </Grid>
                    </StackLayout>
                </Grid>
            </StackLayout>

            <StackLayout Grid.Row="3">
                <Label  
                        Text="footer"
                        HorizontalOptions="Center"/>
            </StackLayout>

            <Button Style="{StaticResource BouttonStyleContentPage}"
                    Grid.Row="5"
                    Text="Fermer"
                    Clicked="FermerPopUp"/>

        </Grid>
    </Border>

</viewModels:BaseContentView>
    